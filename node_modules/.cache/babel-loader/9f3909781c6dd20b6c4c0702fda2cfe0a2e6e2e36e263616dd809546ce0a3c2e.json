{"ast":null,"code":"var _jsxFileName = \"/Users/jaewoo/Desktop/Ministry/IT Business/Document/E-Book Reader/Lumina Press/src/components/ReaderView.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useMemo, Fragment } from 'react';\nimport { ReaderTheme } from '../types';\nimport { CHARS_PER_PAGE } from '../constants';\n\n// Fix: Define the missing ReaderViewProps interface.\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst PageContent = ({\n  content,\n  theme,\n  isFlipping = false,\n  face\n}) => {\n  const themeClasses = {\n    [ReaderTheme.Light]: 'bg-white text-gray-800',\n    [ReaderTheme.Sepia]: 'bg-sepia text-stone-800',\n    [ReaderTheme.Dark]: 'bg-night text-gray-300'\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `w-full h-full font-serif text-lg leading-relaxed select-none flex flex-col justify-center p-8 md:p-12 lg:p-16 relative overflow-hidden ${themeClasses[theme]}`,\n    children: [content.map((element, index) => /*#__PURE__*/_jsxDEV(Fragment, {\n      children: typeof element === 'string' ? /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"mb-4\",\n        style: {\n          whiteSpace: 'pre-wrap'\n        },\n        children: element\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 29,\n        columnNumber: 13\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"my-4 flex-shrink-0\",\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: element.src,\n          alt: \"Illustration\",\n          className: \"max-w-full max-h-[60vh] object-contain mx-auto rounded-lg shadow-md\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 32,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 31,\n        columnNumber: 13\n      }, this)\n    }, index, false, {\n      fileName: _jsxFileName,\n      lineNumber: 27,\n      columnNumber: 9\n    }, this)), isFlipping && face === 'front' && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"absolute inset-0 bg-gradient-to-l from-black/20 via-black/5 to-transparent pointer-events-none\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 9\n    }, this), isFlipping && face === 'back' && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"absolute inset-0 bg-gradient-to-r from-black/20 via-black/5 to-transparent pointer-events-none\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 25,\n    columnNumber: 5\n  }, this);\n};\n_c = PageContent;\nconst ReaderView = ({\n  book,\n  onBackToLibrary\n}) => {\n  _s();\n  const [currentPage, setCurrentPage] = useState(0);\n  const [targetPage, setTargetPage] = useState(null);\n  const [theme, setTheme] = useState(ReaderTheme.Sepia);\n  const [showControls, setShowControls] = useState(true);\n  const isAnimating = targetPage !== null;\n  const direction = isAnimating && targetPage > currentPage ? 'forward' : 'backward';\n  const content = typeof book.content === 'string' ? book.content : '';\n  const parsedContent = useMemo(() => {\n    const imageRegex = /\\[IMAGE:(.*?)\\]/g;\n    const parts = content.split(imageRegex);\n    const elements = [];\n    parts.forEach((part, i) => {\n      if (i % 2 === 0) {\n        if (part) elements.push(part);\n      } else {\n        elements.push({\n          type: 'image',\n          src: part\n        });\n      }\n    });\n    return elements;\n  }, [content]);\n  const pages = useMemo(() => {\n    let current_page_chars = 0;\n    let current_page_content = [];\n    const resulting_pages = [];\n    parsedContent.forEach(element => {\n      if (typeof element === 'string') {\n        let text_element = element;\n        while (text_element.length > 0) {\n          const remaining_chars = CHARS_PER_PAGE - current_page_chars;\n          if (text_element.length <= remaining_chars) {\n            current_page_content.push(text_element);\n            current_page_chars += text_element.length;\n            text_element = '';\n          } else {\n            const chunk = text_element.substring(0, remaining_chars);\n            current_page_content.push(chunk);\n            resulting_pages.push(current_page_content);\n            current_page_content = [];\n            current_page_chars = 0;\n            text_element = text_element.substring(remaining_chars);\n          }\n        }\n      } else {\n        if (current_page_content.length > 0) {\n          resulting_pages.push(current_page_content);\n        }\n        resulting_pages.push([element]);\n        current_page_content = [];\n        current_page_chars = 0;\n      }\n    });\n    if (current_page_content.length > 0) {\n      resulting_pages.push(current_page_content);\n    }\n\n    // Ensure there's always an even number of pages for the spread view\n    if (resulting_pages.length % 2 !== 0) {\n      resulting_pages.push([]);\n    }\n    return resulting_pages.length > 0 ? resulting_pages : [['']];\n  }, [parsedContent]);\n  const totalPages = pages.length;\n  const goToNextPage = () => {\n    if (!isAnimating && currentPage < totalPages - 2) {\n      setTargetPage(currentPage + 2);\n    }\n  };\n  const goToPrevPage = () => {\n    if (!isAnimating && currentPage > 0) {\n      setTargetPage(currentPage - 2);\n    }\n  };\n  const handleAnimationEnd = () => {\n    if (targetPage !== null) {\n      setCurrentPage(targetPage);\n      setTargetPage(null);\n    }\n  };\n  const handlePageClick = () => {\n    setShowControls(prev => !prev);\n  };\n  const themeClasses = {\n    [ReaderTheme.Light]: 'bg-gray-100',\n    [ReaderTheme.Sepia]: 'bg-stone-200',\n    [ReaderTheme.Dark]: 'bg-gray-900'\n  };\n  const getPageContent = pageIndex => pages[pageIndex] || [];\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `fixed inset-0 flex flex-col transition-colors duration-300 ${themeClasses[theme]}`,\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      className: `flex items-center justify-between p-4 bg-opacity-80 backdrop-blur-sm shadow-sm transition-transform duration-300 ease-in-out ${showControls ? 'translate-y-0' : '-translate-y-full'} z-20`,\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: onBackToLibrary,\n        className: \"flex items-center gap-2 hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors\",\n        children: [/*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fas fa-arrow-left\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"font-semibold\",\n          children: \"Library\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 10\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-lg font-bold truncate\",\n          children: book.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-sm\",\n          children: book.author\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center gap-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setTheme(ReaderTheme.Light),\n          className: `w-6 h-6 rounded-full bg-white border-2 ${theme === ReaderTheme.Light ? 'border-indigo-500' : 'border-gray-400'}`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setTheme(ReaderTheme.Sepia),\n          className: `w-6 h-6 rounded-full bg-sepia border-2 ${theme === ReaderTheme.Sepia ? 'border-indigo-500' : 'border-gray-400'}`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setTheme(ReaderTheme.Dark),\n          className: `w-6 h-6 rounded-full bg-night border-2 ${theme === ReaderTheme.Dark ? 'border-indigo-500' : 'border-gray-400'}`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"flex-grow flex items-center justify-center overflow-hidden [perspective:3000px]\",\n      onClick: handlePageClick,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"relative w-full h-full max-w-6xl shadow-2xl\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-full h-full flex\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"w-1/2 h-full\",\n            children: /*#__PURE__*/_jsxDEV(PageContent, {\n              content: getPageContent(isAnimating && direction === 'backward' ? targetPage : currentPage),\n              theme: theme\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 176,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 175,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"w-1/2 h-full\",\n            children: /*#__PURE__*/_jsxDEV(PageContent, {\n              content: getPageContent(isAnimating && direction === 'forward' ? targetPage + 1 : currentPage + 1),\n              theme: theme\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 180,\n              columnNumber: 16\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 179,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 11\n        }, this), isAnimating && /*#__PURE__*/_jsxDEV(\"div\", {\n          onAnimationEnd: handleAnimationEnd,\n          className: `absolute w-1/2 h-full top-0 [transform-style:preserve-3d]\n                ${direction === 'forward' ? 'left-1/2 origin-left animate-page-turn-forward' : 'left-0 origin-right animate-page-turn-backward'}`,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"absolute inset-0 [backface-visibility:hidden]\",\n            children: /*#__PURE__*/_jsxDEV(PageContent, {\n              content: getPageContent(direction === 'forward' ? currentPage + 1 : currentPage),\n              theme: theme,\n              isFlipping: true,\n              face: \"front\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 193,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 192,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"absolute inset-0 [backface-visibility:hidden] [transform:rotateY(180deg)]\",\n            children: /*#__PURE__*/_jsxDEV(PageContent, {\n              content: getPageContent(direction === 'forward' ? currentPage + 2 : currentPage - 1),\n              theme: theme,\n              isFlipping: true,\n              face: \"back\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 197,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 196,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"absolute inset-y-0 left-1/2 -translate-x-1/2 w-px bg-black/20 dark:bg-white/20 pointer-events-none\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"absolute inset-y-0 left-1/2 -translate-x-1/2 w-8 bg-gradient-to-r from-transparent via-black/10 to-transparent dark:via-black/50 pointer-events-none\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 9\n      }, this), !isAnimating && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"absolute left-0 top-0 h-full w-1/4 group\",\n          onClick: e => {\n            e.stopPropagation();\n            goToPrevPage();\n          },\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center justify-start pl-4 h-full opacity-0 group-hover:opacity-100 transition-opacity duration-300 bg-gradient-to-r from-black/10 to-transparent\",\n            children: /*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fas fa-chevron-left text-gray-800 dark:text-white text-3xl drop-shadow-lg\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 212,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 211,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"absolute right-0 top-0 h-full w-1/4 group\",\n          onClick: e => {\n            e.stopPropagation();\n            goToNextPage();\n          },\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center justify-end pr-4 h-full opacity-0 group-hover:opacity-100 transition-opacity duration-300 bg-gradient-to-l from-black/10 to-transparent\",\n            children: /*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fas fa-chevron-right text-gray-800 dark:text-white text-3xl drop-shadow-lg\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 217,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 216,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"footer\", {\n      className: `p-4 bg-opacity-80 backdrop-blur-sm text-center transition-transform duration-300 ease-in-out ${showControls ? 'translate-y-0' : 'translate-y-full'} z-20`,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-full max-w-4xl mx-auto\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"relative h-1 bg-gray-300 dark:bg-gray-600 rounded-full\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"absolute top-0 left-0 h-1 bg-indigo-600 dark:bg-indigo-400 rounded-full transition-all duration-300\",\n            style: {\n              width: `${Math.min(currentPage + 2, totalPages) / totalPages * 100}%`\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 227,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"mt-2 text-sm text-gray-700 dark:text-gray-300\",\n          children: totalPages > 0 ? pages[currentPage + 1] ? `Pages ${currentPage + 1}-${currentPage + 2} of ${totalPages}` : `Page ${currentPage + 1} of ${totalPages}` : 'Page 1'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 232,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 151,\n    columnNumber: 5\n  }, this);\n};\n_s(ReaderView, \"8gY66OAcdXWshueXWIZ1InHEjUY=\");\n_c2 = ReaderView;\nexport default ReaderView;\nvar _c, _c2;\n$RefreshReg$(_c, \"PageContent\");\n$RefreshReg$(_c2, \"ReaderView\");","map":{"version":3,"names":["React","useState","useMemo","Fragment","ReaderTheme","CHARS_PER_PAGE","jsxDEV","_jsxDEV","_Fragment","PageContent","content","theme","isFlipping","face","themeClasses","Light","Sepia","Dark","className","children","map","element","index","style","whiteSpace","fileName","_jsxFileName","lineNumber","columnNumber","src","alt","_c","ReaderView","book","onBackToLibrary","_s","currentPage","setCurrentPage","targetPage","setTargetPage","setTheme","showControls","setShowControls","isAnimating","direction","parsedContent","imageRegex","parts","split","elements","forEach","part","i","push","type","pages","current_page_chars","current_page_content","resulting_pages","text_element","length","remaining_chars","chunk","substring","totalPages","goToNextPage","goToPrevPage","handleAnimationEnd","handlePageClick","prev","getPageContent","pageIndex","onClick","title","author","onAnimationEnd","e","stopPropagation","width","Math","min","_c2","$RefreshReg$"],"sources":["/Users/jaewoo/Desktop/Ministry/IT Business/Document/E-Book Reader/Lumina Press/src/components/ReaderView.tsx"],"sourcesContent":["\nimport React, { useState, useMemo, Fragment, useRef, useEffect } from 'react';\nimport { Book, ReaderTheme } from '../types';\nimport { CHARS_PER_PAGE } from '../constants';\n\n// Fix: Define the missing ReaderViewProps interface.\ninterface ReaderViewProps {\n  book: Book;\n  onBackToLibrary: () => void;\n}\n\nconst PageContent: React.FC<{\n  content: (string | { type: 'image'; src: string })[];\n  theme: ReaderTheme;\n  isFlipping?: boolean;\n  face?: 'front' | 'back';\n}> = ({ content, theme, isFlipping = false, face }) => {\n  const themeClasses = {\n    [ReaderTheme.Light]: 'bg-white text-gray-800',\n    [ReaderTheme.Sepia]: 'bg-sepia text-stone-800',\n    [ReaderTheme.Dark]: 'bg-night text-gray-300',\n  };\n\n  return (\n    <div className={`w-full h-full font-serif text-lg leading-relaxed select-none flex flex-col justify-center p-8 md:p-12 lg:p-16 relative overflow-hidden ${themeClasses[theme]}`}>\n      {content.map((element, index) => (\n        <Fragment key={index}>\n          {typeof element === 'string' ? (\n            <p className=\"mb-4\" style={{ whiteSpace: 'pre-wrap' }}>{element}</p>\n          ) : (\n            <div className=\"my-4 flex-shrink-0\">\n              <img src={element.src} alt=\"Illustration\" className=\"max-w-full max-h-[60vh] object-contain mx-auto rounded-lg shadow-md\" />\n            </div>\n          )}\n        </Fragment>\n      ))}\n      {isFlipping && face === 'front' && (\n        <div className=\"absolute inset-0 bg-gradient-to-l from-black/20 via-black/5 to-transparent pointer-events-none\"></div>\n      )}\n      {isFlipping && face === 'back' && (\n        <div className=\"absolute inset-0 bg-gradient-to-r from-black/20 via-black/5 to-transparent pointer-events-none\"></div>\n      )}\n    </div>\n  );\n};\n\nconst ReaderView: React.FC<ReaderViewProps> = ({ book, onBackToLibrary }) => {\n  const [currentPage, setCurrentPage] = useState(0);\n  const [targetPage, setTargetPage] = useState<number | null>(null);\n  const [theme, setTheme] = useState<ReaderTheme>(ReaderTheme.Sepia);\n  const [showControls, setShowControls] = useState(true);\n\n  const isAnimating = targetPage !== null;\n  const direction = isAnimating && targetPage! > currentPage ? 'forward' : 'backward';\n\n  const content = typeof book.content === 'string' ? book.content : '';\n\n  const parsedContent = useMemo(() => {\n    const imageRegex = /\\[IMAGE:(.*?)\\]/g;\n    const parts = content.split(imageRegex);\n    const elements: (string | { type: 'image', src: string })[] = [];\n    parts.forEach((part, i) => {\n      if (i % 2 === 0) {\n        if (part) elements.push(part);\n      } else {\n        elements.push({ type: 'image', src: part });\n      }\n    });\n    return elements;\n  }, [content]);\n\n  const pages = useMemo(() => {\n    let current_page_chars = 0;\n    let current_page_content: (string | { type: 'image', src: string })[] = [];\n    const resulting_pages: (string | { type: 'image', src: string })[][] = [];\n\n    parsedContent.forEach(element => {\n      if (typeof element === 'string') {\n        let text_element = element;\n        while (text_element.length > 0) {\n          const remaining_chars = CHARS_PER_PAGE - current_page_chars;\n          if (text_element.length <= remaining_chars) {\n            current_page_content.push(text_element);\n            current_page_chars += text_element.length;\n            text_element = '';\n          } else {\n            const chunk = text_element.substring(0, remaining_chars);\n            current_page_content.push(chunk);\n            resulting_pages.push(current_page_content);\n            current_page_content = [];\n            current_page_chars = 0;\n            text_element = text_element.substring(remaining_chars);\n          }\n        }\n      } else {\n        if (current_page_content.length > 0) {\n          resulting_pages.push(current_page_content);\n        }\n        resulting_pages.push([element]);\n        current_page_content = [];\n        current_page_chars = 0;\n      }\n    });\n\n    if (current_page_content.length > 0) {\n      resulting_pages.push(current_page_content);\n    }\n    \n    // Ensure there's always an even number of pages for the spread view\n    if (resulting_pages.length % 2 !== 0) {\n        resulting_pages.push([]);\n    }\n\n    return resulting_pages.length > 0 ? resulting_pages : [['']];\n  }, [parsedContent]);\n  \n  const totalPages = pages.length;\n\n  const goToNextPage = () => {\n    if (!isAnimating && currentPage < totalPages - 2) {\n      setTargetPage(currentPage + 2);\n    }\n  };\n\n  const goToPrevPage = () => {\n    if (!isAnimating && currentPage > 0) {\n      setTargetPage(currentPage - 2);\n    }\n  };\n  \n  const handleAnimationEnd = () => {\n    if (targetPage !== null) {\n      setCurrentPage(targetPage);\n      setTargetPage(null);\n    }\n  };\n\n  const handlePageClick = () => {\n    setShowControls(prev => !prev);\n  };\n\n  const themeClasses = {\n    [ReaderTheme.Light]: 'bg-gray-100',\n    [ReaderTheme.Sepia]: 'bg-stone-200',\n    [ReaderTheme.Dark]: 'bg-gray-900',\n  };\n\n  const getPageContent = (pageIndex: number) => pages[pageIndex] || [];\n  \n  return (\n    <div className={`fixed inset-0 flex flex-col transition-colors duration-300 ${themeClasses[theme]}`}>\n      <header className={`flex items-center justify-between p-4 bg-opacity-80 backdrop-blur-sm shadow-sm transition-transform duration-300 ease-in-out ${showControls ? 'translate-y-0' : '-translate-y-full'} z-20`}>\n         <button onClick={onBackToLibrary} className=\"flex items-center gap-2 hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors\">\n          <i className=\"fas fa-arrow-left\"></i>\n          <span className=\"font-semibold\">Library</span>\n        </button>\n        <div className=\"text-center\">\n          <h1 className=\"text-lg font-bold truncate\">{book.title}</h1>\n          <p className=\"text-sm\">{book.author}</p>\n        </div>\n        <div className=\"flex items-center gap-2\">\n          <button onClick={() => setTheme(ReaderTheme.Light)} className={`w-6 h-6 rounded-full bg-white border-2 ${theme === ReaderTheme.Light ? 'border-indigo-500' : 'border-gray-400'}`}></button>\n          <button onClick={() => setTheme(ReaderTheme.Sepia)} className={`w-6 h-6 rounded-full bg-sepia border-2 ${theme === ReaderTheme.Sepia ? 'border-indigo-500' : 'border-gray-400'}`}></button>\n          <button onClick={() => setTheme(ReaderTheme.Dark)} className={`w-6 h-6 rounded-full bg-night border-2 ${theme === ReaderTheme.Dark ? 'border-indigo-500' : 'border-gray-400'}`}></button>\n        </div>\n      </header>\n\n      <main className=\"flex-grow flex items-center justify-center overflow-hidden [perspective:3000px]\" onClick={handlePageClick}>\n        \n        {/* Wrapper for the book itself to establish a positioning context */}\n        <div className=\"relative w-full h-full max-w-6xl shadow-2xl\">\n          {/* Static book spread */}\n          <div className=\"w-full h-full flex\">\n            {/* Static Left Page */}\n            <div className=\"w-1/2 h-full\">\n              <PageContent content={getPageContent(isAnimating && direction === 'backward' ? targetPage! : currentPage)} theme={theme} />\n            </div>\n            {/* Static Right Page */}\n            <div className=\"w-1/2 h-full\">\n               <PageContent content={getPageContent(isAnimating && direction === 'forward' ? targetPage! + 1 : currentPage + 1)} theme={theme} />\n            </div>\n          </div>\n\n          {/* The flipping page, now positioned relative to the book wrapper */}\n          {isAnimating && (\n            <div\n              onAnimationEnd={handleAnimationEnd}\n              className={`absolute w-1/2 h-full top-0 [transform-style:preserve-3d]\n                ${direction === 'forward' ? 'left-1/2 origin-left animate-page-turn-forward' : 'left-0 origin-right animate-page-turn-backward'}`}\n            >\n              {/* Front Face of Turning Page */}\n              <div className=\"absolute inset-0 [backface-visibility:hidden]\">\n                <PageContent content={getPageContent(direction === 'forward' ? currentPage + 1 : currentPage)} theme={theme} isFlipping={true} face=\"front\" />\n              </div>\n              {/* Back Face of Turning Page */}\n              <div className=\"absolute inset-0 [backface-visibility:hidden] [transform:rotateY(180deg)]\">\n                <PageContent content={getPageContent(direction === 'forward' ? currentPage + 2 : currentPage - 1)} theme={theme} isFlipping={true} face=\"back\" />\n              </div>\n            </div>\n          )}\n\n          {/* Spine effect, also relative to the book wrapper */}\n          <div className=\"absolute inset-y-0 left-1/2 -translate-x-1/2 w-px bg-black/20 dark:bg-white/20 pointer-events-none\" />\n          <div className=\"absolute inset-y-0 left-1/2 -translate-x-1/2 w-8 bg-gradient-to-r from-transparent via-black/10 to-transparent dark:via-black/50 pointer-events-none\" />\n        </div>\n        \n        {/* Click handlers remain relative to the main viewport */}\n        {!isAnimating && (\n          <>\n            <div className=\"absolute left-0 top-0 h-full w-1/4 group\" onClick={(e) => { e.stopPropagation(); goToPrevPage(); }}>\n              <div className=\"flex items-center justify-start pl-4 h-full opacity-0 group-hover:opacity-100 transition-opacity duration-300 bg-gradient-to-r from-black/10 to-transparent\">\n                <i className=\"fas fa-chevron-left text-gray-800 dark:text-white text-3xl drop-shadow-lg\"></i>\n              </div>\n            </div>\n            <div className=\"absolute right-0 top-0 h-full w-1/4 group\" onClick={(e) => { e.stopPropagation(); goToNextPage(); }}>\n              <div className=\"flex items-center justify-end pr-4 h-full opacity-0 group-hover:opacity-100 transition-opacity duration-300 bg-gradient-to-l from-black/10 to-transparent\">\n                <i className=\"fas fa-chevron-right text-gray-800 dark:text-white text-3xl drop-shadow-lg\"></i>\n              </div>\n            </div>\n          </>\n        )}\n      </main>\n\n      <footer className={`p-4 bg-opacity-80 backdrop-blur-sm text-center transition-transform duration-300 ease-in-out ${showControls ? 'translate-y-0' : 'translate-y-full'} z-20`}>\n        <div className=\"w-full max-w-4xl mx-auto\">\n          <div className=\"relative h-1 bg-gray-300 dark:bg-gray-600 rounded-full\">\n            <div\n              className=\"absolute top-0 left-0 h-1 bg-indigo-600 dark:bg-indigo-400 rounded-full transition-all duration-300\"\n              style={{ width: `${(Math.min(currentPage + 2, totalPages) / totalPages) * 100}%` }}\n            ></div>\n          </div>\n          <p className=\"mt-2 text-sm text-gray-700 dark:text-gray-300\">\n            {totalPages > 0\n              ? pages[currentPage + 1]\n                ? `Pages ${currentPage + 1}-${currentPage + 2} of ${totalPages}`\n                : `Page ${currentPage + 1} of ${totalPages}`\n              : 'Page 1'}\n          </p>\n        </div>\n      </footer>\n    </div>\n  );\n};\n\nexport default ReaderView;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}