{"ast":null,"code":"var _jsxFileName = \"/Users/jaewoo/Desktop/Ministry/IT Business/Document/E-Book Reader/Lumina Press/src/components/LibraryView.tsx\",\n  _s = $RefreshSig$();\nimport React, { useMemo, useState, useRef, useEffect } from 'react';\nimport BookCover from './BookCover';\nimport FileUpload from './FileUpload';\nimport { useTheme } from '../contexts/ThemeContext';\nimport useLocalStorage from '../hooks/useLocalStorage';\nimport { themes } from '../themes';\nimport AnnouncementPopup from './AnnouncementPopup';\nimport NotificationToast from './NotificationToast';\nimport { FaShieldAlt, FaCoins, FaBell, FaBellSlash, FaChevronDown } from 'react-icons/fa';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst LibraryView = ({\n  libraryBooks,\n  storeBooks,\n  allPublisherBooks,\n  announcements,\n  userPoints,\n  onSelectBook,\n  onInitiatePurchase,\n  onBookUploaded,\n  onLogout\n}) => {\n  _s();\n  const {\n    theme,\n    setTheme\n  } = useTheme();\n  const Logo = theme.logo;\n  const [dismissedAnnouncements, setDismissedAnnouncements] = useLocalStorage('dismissed-announcements', []);\n  const [isAdminPanelOpen, setIsAdminPanelOpen] = useState(false);\n  const [notificationPermission, setNotificationPermission] = useState(Notification.permission);\n  const [isPublisherSwitcherOpen, setIsPublisherSwitcherOpen] = useState(false);\n  const switcherRef = useRef(null);\n  useEffect(() => {\n    const handleClickOutside = event => {\n      if (switcherRef.current && !switcherRef.current.contains(event.target)) {\n        setIsPublisherSwitcherOpen(false);\n      }\n    };\n    document.addEventListener(\"mousedown\", handleClickOutside);\n    return () => {\n      document.removeEventListener(\"mousedown\", handleClickOutside);\n    };\n  }, [switcherRef]);\n  const activeAnnouncements = useMemo(() => announcements.filter(a => !dismissedAnnouncements.includes(a.id)), [announcements, dismissedAnnouncements]);\n  const popupAnnouncement = useMemo(() => activeAnnouncements.find(a => a.type === 'popup'), [activeAnnouncements]);\n  const notificationAnnouncements = useMemo(() => activeAnnouncements.filter(a => a.type === 'notification'), [activeAnnouncements]);\n  const handleDismiss = id => {\n    setDismissedAnnouncements(prev => [...prev, id]);\n  };\n  const handleCtaClick = announcement => {\n    const bookToPurchase = allPublisherBooks.find(b => b.id === announcement.ctaLink);\n    if (bookToPurchase) {\n      onInitiatePurchase(bookToPurchase);\n    } else {\n      console.log(`CTA clicked for link: ${announcement.ctaLink}`);\n    }\n    handleDismiss(announcement.id);\n  };\n  const handleRequestNotificationPermission = async () => {\n    if ('Notification' in window) {\n      const permission = await Notification.requestPermission();\n      setNotificationPermission(permission);\n      if (permission === 'granted') {\n        new Notification('Notifications Enabled!', {\n          body: `You will now receive updates from ${theme.appName}.`,\n          icon: 'https://picsum.photos/seed/luminaicon/192/192'\n        });\n      }\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gray-50 dark:bg-gray-800 p-4 sm:p-6 lg:p-8\",\n    children: [popupAnnouncement && /*#__PURE__*/_jsxDEV(AnnouncementPopup, {\n      announcement: popupAnnouncement,\n      onDismiss: handleDismiss,\n      onCtaClick: handleCtaClick\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fixed top-4 right-4 z-40 w-full max-w-sm space-y-4\",\n      children: notificationAnnouncements.map(announcement => /*#__PURE__*/_jsxDEV(NotificationToast, {\n        announcement: announcement,\n        onDismiss: handleDismiss,\n        onCtaClick: handleCtaClick\n      }, announcement.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 7\n    }, this), isAdminPanelOpen && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fixed inset-0 bg-black bg-opacity-60 z-50 flex items-center justify-center p-4\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white dark:bg-gray-800 rounded-xl shadow-2xl max-w-md w-full\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-between items-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"text-2xl font-bold text-gray-900 dark:text-white\",\n              children: \"Admin Panel (Simulation)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 126,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setIsAdminPanelOpen(false),\n              className: \"text-gray-400 hover:text-gray-600\",\n              children: /*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fas fa-times\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 127,\n                columnNumber: 117\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 127,\n              columnNumber: 20\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-6 space-y-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex justify-between p-4 bg-gray-100 dark:bg-gray-700 rounded-lg\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"font-semibold text-gray-700 dark:text-gray-200\",\n                children: \"Total Revenue:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 131,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"font-bold text-green-600 dark:text-green-400\",\n                children: \"$1,234.56\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 132,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 130,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex justify-between p-4 bg-gray-100 dark:bg-gray-700 rounded-lg\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"font-semibold text-gray-700 dark:text-gray-200\",\n                children: \"Books Sold:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 135,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"font-bold text-primary-600 dark:text-primary-400\",\n                children: \"128\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 136,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 134,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex justify-between p-4 bg-gray-100 dark:bg-gray-700 rounded-lg\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"font-semibold text-gray-700 dark:text-gray-200\",\n                children: \"Active Users:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 139,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"font-bold text-primary-600 dark:text-primary-400\",\n                children: \"42\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 140,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 138,\n              columnNumber: 20\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 129,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 14\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"flex justify-between items-center mb-8\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"relative\",\n        ref: switcherRef,\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setIsPublisherSwitcherOpen(o => !o),\n          className: \"flex items-center gap-3 p-2 -m-2 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors\",\n          children: [/*#__PURE__*/_jsxDEV(Logo, {\n            className: `w-10 h-10 text-primary-600`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 152,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"text-3xl sm:text-4xl font-extrabold text-gray-900 dark:text-white tracking-tight\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: `text-primary-600`,\n              children: theme.appName.split(' ')[0]\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 154,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"ml-2 hidden sm:inline\",\n              children: theme.appName.split(' ').slice(1).join(' ')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 155,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(FaChevronDown, {\n            className: `text-gray-500 dark:text-gray-400 transition-transform ${isPublisherSwitcherOpen ? 'rotate-180' : ''}`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 157,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 11\n        }, this), isPublisherSwitcherOpen && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"absolute top-full mt-2 w-72 bg-white dark:bg-gray-800 rounded-xl shadow-lg z-20 p-2 border border-gray-200 dark:border-gray-700\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-xs font-semibold text-gray-400 dark:text-gray-500 uppercase px-3 pt-2 pb-1\",\n            children: \"Switch Publisher\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 161,\n            columnNumber: 15\n          }, this), Object.values(themes).map(pTheme => /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => {\n              setTheme(pTheme.key);\n              setIsPublisherSwitcherOpen(false);\n            },\n            className: `w-full flex items-center gap-4 p-3 text-left rounded-lg transition-colors ${theme.key === pTheme.key ? 'bg-primary-100 dark:bg-primary-900/50' : 'hover:bg-gray-100 dark:hover:bg-gray-700'}`,\n            children: [/*#__PURE__*/_jsxDEV(pTheme.logo, {\n              className: \"w-8 h-8 flex-shrink-0\",\n              style: {\n                color: pTheme.colors.primary['500']\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 168,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"font-bold text-gray-800 dark:text-gray-100\",\n                children: pTheme.appName\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 170,\n                columnNumber: 21\n              }, this), theme.key === pTheme.key && /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-xs text-primary-600 dark:text-primary-400 ml-2\",\n                children: \"Currently Selected\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 171,\n                columnNumber: 50\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 169,\n              columnNumber: 19\n            }, this)]\n          }, pTheme.key, true, {\n            fileName: _jsxFileName,\n            lineNumber: 163,\n            columnNumber: 17\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center gap-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center gap-2 bg-yellow-100 dark:bg-yellow-900/50 text-yellow-800 dark:text-yellow-300 font-bold py-2 px-4 rounded-lg\",\n          children: [/*#__PURE__*/_jsxDEV(FaCoins, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 180,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: userPoints.toFixed(2)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 181,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 11\n        }, this), notificationPermission === 'default' && /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleRequestNotificationPermission,\n          className: \"hidden sm:flex items-center justify-center bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-100 font-bold py-2 px-4 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors\",\n          title: \"Enable Notifications\",\n          children: /*#__PURE__*/_jsxDEV(FaBell, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 185,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 13\n        }, this), notificationPermission === 'denied' && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"relative group hidden sm:flex items-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"flex items-center justify-center bg-gray-200 dark:bg-gray-700 text-gray-500 dark:text-gray-400 font-bold py-2 px-4 rounded-lg cursor-not-allowed\",\n            title: \"Notifications Blocked\",\n            disabled: true,\n            children: /*#__PURE__*/_jsxDEV(FaBellSlash, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 191,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 190,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 w-max bg-gray-700 text-white text-xs rounded py-1 px-2 opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-10\",\n            children: [\"Notifications are blocked.\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 195,\n              columnNumber: 17\n            }, this), \"Check your browser settings.\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 193,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setIsAdminPanelOpen(true),\n          className: \"hidden sm:flex items-center gap-2 bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-100 font-bold py-2 px-4 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors\",\n          title: \"Admin Panel\",\n          children: [/*#__PURE__*/_jsxDEV(FaShieldAlt, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 201,\n            columnNumber: 13\n          }, this), \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"hidden lg:inline\",\n            children: \"Admin\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 201,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 200,\n          columnNumber: 12\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: onLogout,\n          className: \"bg-secondary-200 dark:bg-secondary-700 text-secondary-800 dark:text-secondary-100 font-bold py-2 px-4 rounded-lg hover:bg-secondary-300 dark:hover:bg-secondary-600 transition-colors\",\n          children: \"Logout\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(FileUpload, {\n      onBookUploaded: onBookUploaded\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"max-w-7xl mx-auto space-y-12 mt-8\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: `text-3xl font-bold text-gray-800 dark:text-gray-100 mb-6 border-b-2 border-primary-500 pb-2`,\n          children: \"My Bookshelf\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 213,\n          columnNumber: 11\n        }, this), libraryBooks.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-6 sm:gap-8\",\n          children: libraryBooks.map(book => /*#__PURE__*/_jsxDEV(BookCover, {\n            book: book,\n            onActivate: onSelectBook,\n            mode: \"library\"\n          }, book.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 217,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center py-16\",\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fas fa-book-open text-6xl text-gray-300 dark:text-gray-600 mb-4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 222,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-2xl font-semibold text-gray-700 dark:text-gray-200\",\n            children: \"Your Bookshelf is Empty\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 223,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-gray-500 dark:text-gray-400 mt-2\",\n            children: \"Upload a book or add one from the store below!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 224,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 14\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 9\n      }, this), storeBooks.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: `text-3xl font-bold text-gray-800 dark:text-gray-100 mb-6 border-b-2 border-primary-500 pb-2`,\n          children: [\"Discover from \", theme.appName]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 231,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex space-x-6 overflow-x-auto pb-4 -mx-4 px-4 scrollbar-thin scrollbar-thumb-primary-300 scrollbar-track-gray-100\",\n          children: storeBooks.map(book => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex-shrink-0 w-40 sm:w-48\",\n            children: /*#__PURE__*/_jsxDEV(BookCover, {\n              book: book,\n              onActivate: onInitiatePurchase,\n              mode: \"store\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 235,\n              columnNumber: 20\n            }, this)\n          }, book.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 234,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 232,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"footer\", {\n      className: \"text-center mt-12 py-4 text-gray-500 dark:text-gray-400 text-sm\",\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Created with \", /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fas fa-heart text-red-500\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 244,\n          columnNumber: 25\n        }, this), \" for avid readers.\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 101,\n    columnNumber: 5\n  }, this);\n};\n_s(LibraryView, \"f7kTgmw7TJdA8F352QEjUmqpEPA=\", false, function () {\n  return [useTheme, useLocalStorage];\n});\n_c = LibraryView;\nexport default LibraryView;\nvar _c;\n$RefreshReg$(_c, \"LibraryView\");","map":{"version":3,"names":["React","useMemo","useState","useRef","useEffect","BookCover","FileUpload","useTheme","useLocalStorage","themes","AnnouncementPopup","NotificationToast","FaShieldAlt","FaCoins","FaBell","FaBellSlash","FaChevronDown","jsxDEV","_jsxDEV","LibraryView","libraryBooks","storeBooks","allPublisherBooks","announcements","userPoints","onSelectBook","onInitiatePurchase","onBookUploaded","onLogout","_s","theme","setTheme","Logo","logo","dismissedAnnouncements","setDismissedAnnouncements","isAdminPanelOpen","setIsAdminPanelOpen","notificationPermission","setNotificationPermission","Notification","permission","isPublisherSwitcherOpen","setIsPublisherSwitcherOpen","switcherRef","handleClickOutside","event","current","contains","target","document","addEventListener","removeEventListener","activeAnnouncements","filter","a","includes","id","popupAnnouncement","find","type","notificationAnnouncements","handleDismiss","prev","handleCtaClick","announcement","bookToPurchase","b","ctaLink","console","log","handleRequestNotificationPermission","window","requestPermission","body","appName","icon","className","children","onDismiss","onCtaClick","fileName","_jsxFileName","lineNumber","columnNumber","map","onClick","ref","o","split","slice","join","Object","values","pTheme","key","style","color","colors","primary","toFixed","title","disabled","length","book","onActivate","mode","_c","$RefreshReg$"],"sources":["/Users/jaewoo/Desktop/Ministry/IT Business/Document/E-Book Reader/Lumina Press/src/components/LibraryView.tsx"],"sourcesContent":["\nimport React, { useMemo, useState, useRef, useEffect } from 'react';\nimport { Book, Announcement } from '../types';\nimport BookCover from './BookCover';\nimport FileUpload from './FileUpload';\nimport { useTheme } from '../contexts/ThemeContext';\nimport useLocalStorage from '../hooks/useLocalStorage';\nimport { themes } from '../themes';\nimport AnnouncementPopup from './AnnouncementPopup';\nimport NotificationToast from './NotificationToast';\nimport { FaShieldAlt, FaCoins, FaBell, FaBellSlash, FaChevronDown } from 'react-icons/fa';\n\ninterface LibraryViewProps {\n  libraryBooks: Book[];\n  storeBooks: Book[];\n  allPublisherBooks: Book[];\n  announcements: Announcement[];\n  userPoints: number;\n  onSelectBook: (book: Book) => void;\n  onInitiatePurchase: (book: Book) => void;\n  onBookUploaded: (book: Book) => void;\n  onLogout: () => void;\n}\n\nconst LibraryView: React.FC<LibraryViewProps> = ({ \n  libraryBooks, \n  storeBooks, \n  allPublisherBooks,\n  announcements,\n  userPoints, \n  onSelectBook, \n  onInitiatePurchase, \n  onBookUploaded, \n  onLogout \n}) => {\n  const { theme, setTheme } = useTheme();\n  const Logo = theme.logo;\n\n  const [dismissedAnnouncements, setDismissedAnnouncements] = useLocalStorage<string[]>('dismissed-announcements', []);\n  const [isAdminPanelOpen, setIsAdminPanelOpen] = useState(false);\n  const [notificationPermission, setNotificationPermission] = useState(Notification.permission);\n  const [isPublisherSwitcherOpen, setIsPublisherSwitcherOpen] = useState(false);\n  const switcherRef = useRef<HTMLDivElement>(null);\n\n\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n        if (switcherRef.current && !switcherRef.current.contains(event.target as Node)) {\n            setIsPublisherSwitcherOpen(false);\n        }\n    };\n    document.addEventListener(\"mousedown\", handleClickOutside);\n    return () => {\n        document.removeEventListener(\"mousedown\", handleClickOutside);\n    };\n  }, [switcherRef]);\n\n  const activeAnnouncements = useMemo(() => \n    announcements.filter(a => !dismissedAnnouncements.includes(a.id)),\n    [announcements, dismissedAnnouncements]\n  );\n\n  const popupAnnouncement = useMemo(() => \n    activeAnnouncements.find(a => a.type === 'popup'),\n    [activeAnnouncements]\n  );\n  \n  const notificationAnnouncements = useMemo(() =>\n    activeAnnouncements.filter(a => a.type === 'notification'),\n    [activeAnnouncements]\n  );\n\n  const handleDismiss = (id: string) => {\n    setDismissedAnnouncements(prev => [...prev, id]);\n  };\n  \n  const handleCtaClick = (announcement: Announcement) => {\n    const bookToPurchase = allPublisherBooks.find(b => b.id === announcement.ctaLink);\n    if (bookToPurchase) {\n      onInitiatePurchase(bookToPurchase);\n    } else {\n      console.log(`CTA clicked for link: ${announcement.ctaLink}`);\n    }\n    handleDismiss(announcement.id);\n  };\n  \n  const handleRequestNotificationPermission = async () => {\n    if ('Notification' in window) {\n      const permission = await Notification.requestPermission();\n      setNotificationPermission(permission);\n      if (permission === 'granted') {\n        new Notification('Notifications Enabled!', {\n          body: `You will now receive updates from ${theme.appName}.`,\n          icon: 'https://picsum.photos/seed/luminaicon/192/192',\n        });\n      }\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 dark:bg-gray-800 p-4 sm:p-6 lg:p-8\">\n       {/* Announcements Section */}\n      {popupAnnouncement && (\n        <AnnouncementPopup \n          announcement={popupAnnouncement} \n          onDismiss={handleDismiss}\n          onCtaClick={handleCtaClick}\n        />\n      )}\n      <div className=\"fixed top-4 right-4 z-40 w-full max-w-sm space-y-4\">\n        {notificationAnnouncements.map(announcement => (\n          <NotificationToast \n            key={announcement.id}\n            announcement={announcement}\n            onDismiss={handleDismiss}\n            onCtaClick={handleCtaClick}\n          />\n        ))}\n      </div>\n      \n       {isAdminPanelOpen && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-60 z-50 flex items-center justify-center p-4\">\n          <div className=\"bg-white dark:bg-gray-800 rounded-xl shadow-2xl max-w-md w-full\">\n             <div className=\"p-6\">\n                <div className=\"flex justify-between items-center\">\n                  <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white\">Admin Panel (Simulation)</h2>\n                   <button onClick={() => setIsAdminPanelOpen(false)} className=\"text-gray-400 hover:text-gray-600\"><i className=\"fas fa-times\"></i></button>\n                </div>\n                <div className=\"mt-6 space-y-4\">\n                  <div className=\"flex justify-between p-4 bg-gray-100 dark:bg-gray-700 rounded-lg\">\n                    <span className=\"font-semibold text-gray-700 dark:text-gray-200\">Total Revenue:</span>\n                    <span className=\"font-bold text-green-600 dark:text-green-400\">$1,234.56</span>\n                  </div>\n                  <div className=\"flex justify-between p-4 bg-gray-100 dark:bg-gray-700 rounded-lg\">\n                    <span className=\"font-semibold text-gray-700 dark:text-gray-200\">Books Sold:</span>\n                    <span className=\"font-bold text-primary-600 dark:text-primary-400\">128</span>\n                  </div>\n                   <div className=\"flex justify-between p-4 bg-gray-100 dark:bg-gray-700 rounded-lg\">\n                    <span className=\"font-semibold text-gray-700 dark:text-gray-200\">Active Users:</span>\n                    <span className=\"font-bold text-primary-600 dark:text-primary-400\">42</span>\n                  </div>\n                </div>\n             </div>\n          </div>\n        </div>\n      )}\n\n\n      <header className=\"flex justify-between items-center mb-8\">\n        <div className=\"relative\" ref={switcherRef}>\n          <button onClick={() => setIsPublisherSwitcherOpen(o => !o)} className=\"flex items-center gap-3 p-2 -m-2 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors\">\n            <Logo className={`w-10 h-10 text-primary-600`} />\n            <h1 className=\"text-3xl sm:text-4xl font-extrabold text-gray-900 dark:text-white tracking-tight\">\n              <span className={`text-primary-600`}>{theme.appName.split(' ')[0]}</span>\n              <span className=\"ml-2 hidden sm:inline\">{theme.appName.split(' ').slice(1).join(' ')}</span>\n            </h1>\n            <FaChevronDown className={`text-gray-500 dark:text-gray-400 transition-transform ${isPublisherSwitcherOpen ? 'rotate-180' : ''}`} />\n          </button>\n          {isPublisherSwitcherOpen && (\n            <div className=\"absolute top-full mt-2 w-72 bg-white dark:bg-gray-800 rounded-xl shadow-lg z-20 p-2 border border-gray-200 dark:border-gray-700\">\n              <p className=\"text-xs font-semibold text-gray-400 dark:text-gray-500 uppercase px-3 pt-2 pb-1\">Switch Publisher</p>\n              {Object.values(themes).map(pTheme => (\n                <button\n                  key={pTheme.key}\n                  onClick={() => { setTheme(pTheme.key); setIsPublisherSwitcherOpen(false); }}\n                  className={`w-full flex items-center gap-4 p-3 text-left rounded-lg transition-colors ${theme.key === pTheme.key ? 'bg-primary-100 dark:bg-primary-900/50' : 'hover:bg-gray-100 dark:hover:bg-gray-700'}`}\n                >\n                  <pTheme.logo className=\"w-8 h-8 flex-shrink-0\" style={{ color: pTheme.colors.primary['500'] }} />\n                  <div>\n                    <span className=\"font-bold text-gray-800 dark:text-gray-100\">{pTheme.appName}</span>\n                    {theme.key === pTheme.key && <span className=\"text-xs text-primary-600 dark:text-primary-400 ml-2\">Currently Selected</span>}\n                  </div>\n                </button>\n              ))}\n            </div>\n          )}\n        </div>\n        <div className=\"flex items-center gap-4\">\n          <div className=\"flex items-center gap-2 bg-yellow-100 dark:bg-yellow-900/50 text-yellow-800 dark:text-yellow-300 font-bold py-2 px-4 rounded-lg\">\n            <FaCoins />\n            <span>{userPoints.toFixed(2)}</span>\n          </div>\n           {notificationPermission === 'default' && (\n            <button onClick={handleRequestNotificationPermission} className=\"hidden sm:flex items-center justify-center bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-100 font-bold py-2 px-4 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors\" title=\"Enable Notifications\">\n                <FaBell />\n            </button>\n          )}\n          {notificationPermission === 'denied' && (\n            <div className=\"relative group hidden sm:flex items-center\">\n              <button className=\"flex items-center justify-center bg-gray-200 dark:bg-gray-700 text-gray-500 dark:text-gray-400 font-bold py-2 px-4 rounded-lg cursor-not-allowed\" title=\"Notifications Blocked\" disabled>\n                <FaBellSlash />\n              </button>\n              <div className=\"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 w-max bg-gray-700 text-white text-xs rounded py-1 px-2 opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-10\">\n                Notifications are blocked.\n                <br />\n                Check your browser settings.\n              </div>\n            </div>\n          )}\n           <button onClick={() => setIsAdminPanelOpen(true)} className=\"hidden sm:flex items-center gap-2 bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-100 font-bold py-2 px-4 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors\" title=\"Admin Panel\">\n            <FaShieldAlt /> <span className=\"hidden lg:inline\">Admin</span>\n          </button>\n          <button onClick={onLogout} className=\"bg-secondary-200 dark:bg-secondary-700 text-secondary-800 dark:text-secondary-100 font-bold py-2 px-4 rounded-lg hover:bg-secondary-300 dark:hover:bg-secondary-600 transition-colors\">\n            Logout\n          </button>\n        </div>\n      </header>\n      \n      <FileUpload onBookUploaded={onBookUploaded} />\n\n      <main className=\"max-w-7xl mx-auto space-y-12 mt-8\">\n        <div>\n          <h2 className={`text-3xl font-bold text-gray-800 dark:text-gray-100 mb-6 border-b-2 border-primary-500 pb-2`}>My Bookshelf</h2>\n          {libraryBooks.length > 0 ? (\n            <div className=\"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-6 sm:gap-8\">\n              {libraryBooks.map((book) => (\n                <BookCover key={book.id} book={book} onActivate={onSelectBook} mode=\"library\" />\n              ))}\n            </div>\n          ) : (\n             <div className=\"text-center py-16\">\n                <i className=\"fas fa-book-open text-6xl text-gray-300 dark:text-gray-600 mb-4\"></i>\n                <h2 className=\"text-2xl font-semibold text-gray-700 dark:text-gray-200\">Your Bookshelf is Empty</h2>\n                <p className=\"text-gray-500 dark:text-gray-400 mt-2\">Upload a book or add one from the store below!</p>\n            </div>\n          )}\n        </div>\n\n        {storeBooks.length > 0 && (\n          <div>\n            <h2 className={`text-3xl font-bold text-gray-800 dark:text-gray-100 mb-6 border-b-2 border-primary-500 pb-2`}>Discover from {theme.appName}</h2>\n            <div className=\"flex space-x-6 overflow-x-auto pb-4 -mx-4 px-4 scrollbar-thin scrollbar-thumb-primary-300 scrollbar-track-gray-100\">\n              {storeBooks.map((book) => (\n                <div key={book.id} className=\"flex-shrink-0 w-40 sm:w-48\">\n                   <BookCover book={book} onActivate={onInitiatePurchase} mode=\"store\" />\n                </div>\n              ))}\n            </div>\n          </div>\n        )}\n      </main>\n      \n      <footer className=\"text-center mt-12 py-4 text-gray-500 dark:text-gray-400 text-sm\">\n        <p>Created with <i className=\"fas fa-heart text-red-500\"></i> for avid readers.</p>\n      </footer>\n    </div>\n  );\n};\n\nexport default LibraryView;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}